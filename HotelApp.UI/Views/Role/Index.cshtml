 @model List<GetRolesDTO>
@{
	int rowNumber = 1;
	TempData["Title"] = "Roles";
}

<div class="page-header page-header-default">
	<div class="page-header-content">
		<div class="page-title">
			<h4><i class="icon-arrow-left52 position-left"></i> <span class="text-semibold">Roles</span></h4>
		</div>
		
		<div class="heading-elements">
			<div class="heading-btn-group">
				<a href="#" class="btn btn-link btn-float has-text"><i class="icon-bars-alt text-primary"></i><span>Statistics</span></a>
				<a href="#" class="btn btn-link btn-float has-text"><i class="icon-calculator text-primary"></i> <span>Invoices</span></a>
				<a href="#" class="btn btn-link btn-float has-text"><i class="icon-calendar5 text-primary"></i> <span>Schedule</span></a>
			</div>
		</div>
	</div>

	<div class="breadcrumb-line">
		<ul class="breadcrumb">
			<li><a asp-action="Index" asp-controller="Home"><i class="icon-home2 position-left"></i> Home</a></li>
			@* <li><a asp-action="GetRoles" asp-controller="Role">Administration</a></li> *@
			<li class="active">Roles (@Model.Count())</li>
		</ul>

		<ul class="breadcrumb-elements">
			<li><a href="#"><i class="icon-comment-discussion position-left"></i> Support</a></li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					<i class="icon-gear position-left"></i>
					Settings
					<span class="caret"></span>
				</a>

				<ul class="dropdown-menu dropdown-menu-right">
					<li><a href="#"><i class="icon-user-lock"></i> Account security</a></li>
					<li><a href="#"><i class="icon-statistics"></i> Analytics</a></li>
					<li><a href="#"><i class="icon-accessibility"></i> Accessibility</a></li>
					<li class="divider"></li>
					<li><a href="#"><i class="icon-gear"></i> All settings</a></li>
				</ul>
			</li>
		</ul>
	</div>
</div>


 <div class="content">
	<div class="panel panel-flat">
		<div class="panel-heading">
            <h5 class="panel-title">Roles</h5>

			<div class="heading-elements" style=" margin-right:0px">
				@if (User.HasClaim("permission", "Role.Add"))
				{
				<button data-title="Add New Role" data-url="/Role/AddRole" type="button" class="btn bg-teal-400 btn-lg btnOpenModal">
					<i class="icon-plus-circle2" style="font-size:21px; margin-right:5px; margin-top:3px"></i>
					Add Role
				</button>
				}
			</div>
		</div>

		<hr class="my-3" style="margin-top:5px">

		<div class="panel-heading" style="margin-bottom:40px">
			<div class="heading-elements">
				<ul class="icons-list">
					<li><button id="toggleFilterBtn" class="btn bg-teal-400 "><i class="icon-filter3"></i> Filter</button> </li>
					<li><a class="btn bg-teal-400" id="refreshRoomsBtn" style="color:#fff" data-action="reload"></a></li>
					<li><a class="btn bg-teal-400" style="color:#fff" data-action="collapse"></a></li>
				</ul>
			</div>
		</div>

		
		
		<table class="table datatable-basic">
			<thead >
				<tr class="border-double active">
					<th>Number</th>
					<th>Role Name</th>
					<th>Role Name</th>
					<th>Created At</th>
                    <th>Last Modified At</th>
                    <th>Is Active</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model)
				{
					<tr>
						<td>@rowNumber</td>
						<td>@item.Name</td>
						<td>@item.Name</td>
						<td>@item.CreatedDate</td>
						<td>@item.LastModifiedDate</td>
						@if (item.IsActive)
						{
							<td><span class="label label-rounded label-success">Active</span></td>
						}
						else
						{
							<td><span class="label label-rounded label-danger">Not Active</span></td>
						}
							<td>
							@if (User.HasClaim("permission", "Role.Edit"))
							{
								<a data-popup="popover" title="Assign Permissions" 
								data-trigger="hover" data-content=""
								   asp-action="AssignPermissions" asp-controller="Role" asp-route-Id="@item.Id"
								   class="text-primary-600">
									<i class="icon-cog7" style="font-size:20px; margin-right:8px"></i>
								</a>

							}    
							@if (item.IsBasic == false)
                            {
								@if (User.HasClaim("permission", "Role.Edit"))
								{
								<a data-title="Edit Role" data-url="/Role/EditRole/@item.Id" class="text-teal-600 btnEditOpenModal"><i class="icon-pencil7" style="font-size:20px; margin-right:8px"></i> </a>
								}
								@if (User.HasClaim("permission", "Role.Delete") && !item.IsActive)
								{
									<a data-url="/Role/DeleteRole/@item.Id"
									   class="text-danger-600 btn-delete">
										<i class="icon-trash" style="font-size:20px;margin-right:8px"></i>
									</a>
								}
							}
							</td>
					</tr>
					rowNumber++;
				}
			</tbody>
		</table>
	</div>

</div>

@section Scripts{

}