@model IEnumerable<GetAllReservationsDTO>
@{
	TempData["Title"] = "Reservations";
}

<!-- Page header -->
<div class="page-header page-header-default">
    <div class="page-header-content">
        <div class="page-title">
            <h4><i class="icon-arrow-left52 position-left"></i> <span class="text-semibold">Reservations</span> </h4>
        </div>

        <div class="heading-elements">
            <div class="heading-btn-group">
                <a href="#" class="btn btn-link btn-float has-text"><i class="icon-bars-alt text-primary"></i><span>Statistics</span></a>
                <a href="#" class="btn btn-link btn-float has-text"><i class="icon-calculator text-primary"></i> <span>Invoices</span></a>
                <a href="#" class="btn btn-link btn-float has-text"><i class="icon-calendar5 text-primary"></i> <span>Schedule</span></a>
            </div>
        </div>
    </div>

    <div class="breadcrumb-line">
        <ul class="breadcrumb">
            <li><a asp-action="Index" asp-controller="Home"><i class="icon-home2 position-left"></i> Home</a></li>
            @* <li><a asp-action="Index" asp-controller="Reservation">Reseravation Managment</a></li> *@
            <li class="active">Reservations (@Model.Count())</li>
        </ul>

        <ul class="breadcrumb-elements">
            <li><a href="#"><i class="icon-comment-discussion position-left"></i> Support</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <i class="icon-gear position-left"></i>
                    Settings
                    <span class="caret"></span>
                </a>

                <ul class="dropdown-menu dropdown-menu-right">
                    <li><a href="#"><i class="icon-user-lock"></i> Account security</a></li>
                    <li><a href="#"><i class="icon-statistics"></i> Analytics</a></li>
                    <li><a href="#"><i class="icon-accessibility"></i> Accessibility</a></li>
                    <li class="divider"></li>
                    <li><a href="#"><i class="icon-gear"></i> All settings</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<!-- /page header -->


<!-- Content area -->
<div class="content ">

	<!-- Basic datatable -->
	<div class="panel panel-flat ">
		<div class="panel-heading">
			<h5 class="panel-title">Reservations</h5>
			@if (User.HasClaim("permission", "Reservation.Add"))
            {
			<div class="heading-elements" style=" margin-right:0px">
				<a asp-action="AddReservation" asp-controller="Reservation" type="button" class="btn bg-teal-400 btn-lg">
					<i class="icon-plus-circle2" style="font-size:21px; margin-right:5px; margin-top:3px"></i>
					Add Reservation
				</a>
			</div>
			}
		</div>
		<hr class="my-3" style="margin-top:5px">

		<div class="panel-heading" style="margin-bottom:40px">
			<div class="heading-elements">
				<ul class="icons-list">
					<li>
						<button id="toggleFilterBtn" class="btn bg-teal-400 "><i class="icon-filter3"></i> Filter</button>
					</li>
					<li><a class="btn bg-teal-400" id="refreshRoomsBtn" style="color:#fff" data-action="reload"></a></li>
					<li><a class="btn bg-teal-400" style="color:#fff" data-action="collapse"></a></li>
				</ul>
			</div>
		</div>

		<table class="table datatable-button-html5-basic dataTable" id="MyTable">
			<thead>
				<tr class="border-double">
					<th>#</th>
					<th>Primary Guest</th>
					<th>Check In Date</th>
					<th>Check Out Date</th>
					<th>Status</th>
					<th>Created By</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model)
				{
					<tr id="item-@item.Id">
						<td><a>@item.Id</a></td>
						<td>@item.PrimaryGuestName</td>
						<td>@item.CheckInDate.ToShortDateString()</td>
						<td>@item.CheckOutDate.ToShortDateString()</td>
						<td>@item.Status</td>
						<td>@item.CreatedBy</td>
						<td>
							@if (User.HasClaim("permission", "Reservation.View"))
							{
								<a><i class="icon-info22" style="font-size:20px; margin-right:8px"></i>  </a>
							}
							@if (User.HasClaim("permission", "Reservation.Edit"))
							{
								<a data-title="Edit Resrvation" data-url="" class="text-teal-600 btnEditOpenModal"><i class="icon-pencil7" style="font-size:20px; margin-right:8px"></i> </a>
							}
							@if (User.HasClaim("permission", "Reservation.Delete"))
							{
								<a data-id="@item.Id" class="text-danger-600 btn-delete"><i class="icon-trash" style="font-size:20px;margin-right:8px"></i> </a>
							}
							
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
	<!-- /basic datatable -->
</div>
<!-- /content area -->

@section Scripts {
    <script>
        $(document).ready(function () {
            var successMessage = '@TempData["Success"]';
            if (successMessage) {
                toastr.success(successMessage);
            }
        });
    </script>

}
